<p-card header="Horarios de DispensaciÃ³n de Alimento">
  <div class="mb-4">
    <p-button label="Nuevo Horario" icon="pi pi-plus" (click)="openNewDialog()" />
  </div>

  <p-table [value]="schedules">
    <ng-template #header>
      <tr>
        <th>Hora</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template #body let-schedule>
      <tr>
        <td>{{ schedule.time }}</td>
        <td>
          @if (schedule.active) {
            <p-tag severity="success" value="Activo" />
          } @else {
            <p-tag severity="danger" value="Inactivo" />
          }
        </td>
        <td>
          <p-button
            icon="pi pi-pencil"
            severity="info"
            [text]="true"
            (click)="openEditDialog(schedule)"
            pTooltip="Editar" />
          <p-button
            [icon]="schedule.active ? 'pi pi-eye-slash' : 'pi pi-eye'"
            [severity]="schedule.active ? 'secondary' : 'success'"
            [text]="true"
            (click)="toggleActive(schedule)"
            [pTooltip]="schedule.active ? 'Desactivar' : 'Activar'" />
          <p-button
            icon="pi pi-trash"
            severity="danger"
            [text]="true"
            (click)="deleteSchedule(schedule)"
            pTooltip="Eliminar" />
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>

<p-dialog
  [(visible)]="displayDialog"
  [header]="isEditMode ? 'Editar Horario' : 'Nuevo Horario'"
  [modal]="true"
  [style]="{ width: '450px' }">
  <div class="flex flex-col gap-4">
    <div class="flex flex-col gap-2">
      <label for="time">Hora</label>
      <input
        id="time"
        type="time"
        pInputText
        [(ngModel)]="selectedSchedule.time"
        class="w-full" />
    </div>

    <div class="flex items-center gap-2">
      <input
        id="active"
        type="checkbox"
        [(ngModel)]="selectedSchedule.active" />
      <label for="active">Activo</label>
    </div>
  </div>

  <ng-template #footer>
    <p-button
      label="Cancelar"
      severity="secondary"
      (click)="displayDialog = false" />
    <p-button
      label="Guardar"
      (click)="saveSchedule()" />
  </ng-template>
</p-dialog>
